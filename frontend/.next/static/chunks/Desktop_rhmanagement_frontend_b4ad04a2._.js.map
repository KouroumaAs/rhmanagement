{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mariame%20barry/Desktop/rhmanagement/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, ReactNode } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/src/contexts/AuthContext';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: ReactNode;\r\n  allowedRoles?: string[];\r\n}\r\n\r\nexport default function ProtectedRoute({ children, allowedRoles }: ProtectedRouteProps) {\r\n  const { isAuthenticated, user, isLoading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      // Si pas authentifié, rediriger vers login\r\n      if (!isAuthenticated) {\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      // Si des rôles sont spécifiés, vérifier que l'utilisateur a le bon rôle\r\n      if (allowedRoles && allowedRoles.length > 0) {\r\n        if (!user || !allowedRoles.includes(user.role)) {\r\n          // Rediriger vers le dashboard approprié selon le rôle\r\n          if (user?.role === 'RH') {\r\n            router.push('/dashboard/rh/employees');\r\n          } else if (user?.role === 'ASSISTANT_RH') {\r\n            router.push('/dashboard/rh');\r\n          } else if (user?.role === 'IMPRESSION') {\r\n            router.push('/dashboard/impression');\r\n          } else if (user?.role === 'ADMIN') {\r\n            router.push('/dashboard/rh');\r\n          } else {\r\n            router.push('/login');\r\n          }\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }, [isAuthenticated, user, isLoading, allowedRoles, router]);\r\n\r\n  // Afficher un loader pendant la vérification\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-white to-[#fff5ed]\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-[#ff8d13] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600 font-medium\">Vérification de l'authentification...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Si pas authentifié ou pas le bon rôle, ne rien afficher (redirection en cours)\r\n  if (!isAuthenticated || (allowedRoles && allowedRoles.length > 0 && (!user || !allowedRoles.includes(user.role)))) {\r\n    return null;\r\n  }\r\n\r\n  // Sinon, afficher le contenu\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAWe,SAAS,eAAe,KAA+C;QAA/C,EAAE,QAAQ,EAAE,YAAY,EAAuB,GAA/C;;IACrC,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,oLAAO;IACpD,MAAM,SAAS,IAAA,yLAAS;IAExB,IAAA,iNAAS;oCAAC;YACR,IAAI,CAAC,WAAW;gBACd,2CAA2C;gBAC3C,IAAI,CAAC,iBAAiB;oBACpB,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,wEAAwE;gBACxE,IAAI,gBAAgB,aAAa,MAAM,GAAG,GAAG;oBAC3C,IAAI,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;wBAC9C,sDAAsD;wBACtD,IAAI,CAAA,iBAAA,2BAAA,KAAM,IAAI,MAAK,MAAM;4BACvB,OAAO,IAAI,CAAC;wBACd,OAAO,IAAI,CAAA,iBAAA,2BAAA,KAAM,IAAI,MAAK,gBAAgB;4BACxC,OAAO,IAAI,CAAC;wBACd,OAAO,IAAI,CAAA,iBAAA,2BAAA,KAAM,IAAI,MAAK,cAAc;4BACtC,OAAO,IAAI,CAAC;wBACd,OAAO,IAAI,CAAA,iBAAA,2BAAA,KAAM,IAAI,MAAK,SAAS;4BACjC,OAAO,IAAI,CAAC;wBACd,OAAO;4BACL,OAAO,IAAI,CAAC;wBACd;wBACA;oBACF;gBACF;YACF;QACF;mCAAG;QAAC;QAAiB;QAAM;QAAW;QAAc;KAAO;IAE3D,6CAA6C;IAC7C,IAAI,WAAW;QACb,qBACE,oOAAC;YAAI,WAAU;sBACb,cAAA,oOAAC;gBAAI,WAAU;;kCACb,oOAAC;wBAAI,WAAU;;;;;;kCACf,oOAAC;wBAAE,WAAU;kCAA4B;;;;;;;;;;;;;;;;;IAIjD;IAEA,iFAAiF;IACjF,IAAI,CAAC,mBAAoB,gBAAgB,aAAa,MAAM,GAAG,KAAK,CAAC,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,CAAC,GAAI;QACjH,OAAO;IACT;IAEA,6BAA6B;IAC7B,qBAAO;kBAAG;;AACZ;GApDwB;;QACuB,oLAAO;QACrC,yLAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mariame%20barry/Desktop/rhmanagement/frontend/app/dashboard/rh/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport ProtectedRoute from \"@/src/components/ProtectedRoute\";\r\n\r\nexport default function DashboardRHLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <ProtectedRoute allowedRoles={[\"RH\", \"ASSISTANT_RH\", \"ADMIN\"]}>\r\n      {children}\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,kBAAkB,KAIzC;QAJyC,EACxC,QAAQ,EAGT,GAJyC;IAKxC,qBACE,oOAAC,yLAAc;QAAC,cAAc;YAAC;YAAM;YAAgB;SAAQ;kBAC1D;;;;;;AAGP;KAVwB","debugId":null}}]
}