(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67493,(e,o,t)=>{o.exports=e.r(35710)},65497,e=>{"use strict";e.s(["AuthProvider",()=>a,"useAuth",()=>i]);var o=e.i(50622),t=e.i(17257),r=e.i(67493);let l=(0,t.createContext)(void 0),s=["/login","/register","/forgot-password","/verify"];function a(e){let{children:a}=e,[i,n]=(0,t.useState)(null),[u,c]=(0,t.useState)(null),[d,h]=(0,t.useState)(!0),g=(0,r.useRouter)(),m=(0,r.usePathname)();return(0,t.useEffect)(()=>{let e=localStorage.getItem("token"),o=localStorage.getItem("user");e&&o&&(c(e),n(JSON.parse(o))),h(!1)},[]),(0,t.useEffect)(()=>{if(!d){let e=s.some(e=>null==m?void 0:m.startsWith(e)),o="/"===m,t=null==m?void 0:m.startsWith("/dashboard/rh/employees"),r="/dashboard/rh"===m,l=null==m?void 0:m.startsWith("/dashboard/rh/users"),a="/change-password"===m;if(!u&&!e&&!o)return void g.push("/login");if(u&&i&&("RH"===i.role||"ASSISTANT_RH"===i.role)){if(l)return void g.push("/dashboard/rh/employees");t||r||e||o||a||g.push("/dashboard/rh/employees")}}},[u,i,m,d,g]),(0,o.jsx)(l.Provider,{value:{user:i,token:u,isLoading:d,login:(e,o)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(o)),document.cookie="token=".concat(e,"; path=/; max-age=").concat(604800),c(e),n(o)},logout:()=>{console.log("logout() appelé"),localStorage.removeItem("token"),localStorage.removeItem("user"),console.log("localStorage nettoyé"),document.cookie="token=; path=/; max-age=0",console.log("Cookie supprimé"),c(null),n(null),console.log("État réinitialisé"),console.log("Redirection vers /login..."),window.location.href="/login"},isAuthenticated:!!u},children:a})}function i(){let e=(0,t.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},31247,e=>{"use strict";e.s(["default",()=>t]);var o=e.i(17257);function t(){return(0,o.useEffect)(()=>{},[]),null}}]);