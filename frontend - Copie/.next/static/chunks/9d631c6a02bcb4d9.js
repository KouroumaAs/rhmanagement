(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49505,e=>{"use strict";e.s(["Input",()=>a]);var t=e.i(50622),r=e.i(34821);function a(e){let{className:a,type:s,...n}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-[#ff8d13] selection:text-white dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","select-text cursor-text",a),style:{userSelect:"text",WebkitUserSelect:"text"},...n})}},40267,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["authService",()=>d,"del",()=>c,"get",()=>n,"handleApiError",()=>l,"post",()=>o,"put",()=>i],40267);var r=e.i(18326);class a extends Error{getUserMessage(){switch(this.status){case 400:return"‚ùå Erreur de validation: ".concat(this.message);case 401:return"üîí Session expir√©e. Veuillez vous reconnecter.";case 403:return"‚õî Acc√®s refus√©. Vous n'avez pas les permissions n√©cessaires.";case 404:return"üîç Ressource non trouv√©e: ".concat(this.message);case 409:return"‚ö†Ô∏è Conflit: ".concat(this.message);case 422:return"üìã Donn√©es invalides: ".concat(this.message);case 500:return"üî• Erreur serveur: ".concat(this.message);case 503:return"‚è∏Ô∏è Service temporairement indisponible. R√©essayez plus tard.";default:return"‚ùå ".concat(this.message)}}getDebugInfo(){return"[".concat(this.status,"] ").concat(this.name,": ").concat(this.message,"\nData: ").concat(JSON.stringify(this.data,null,2))}constructor(e,r,a){super(r),t(this,"status",void 0),t(this,"message",void 0),t(this,"data",void 0),this.status=e,this.message=r,this.data=a,this.name="ApiError"}}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=localStorage.getItem("token")||localStorage.getItem("auth_token");console.log("üåê API Request: ".concat(t.method||"GET"," ").concat(e));let s=new AbortController,n=setTimeout(()=>s.abort(),3e4);try{let o,i=await fetch("".concat("http://192.168.100.171:4003/api").concat(e),{...t,cache:"no-store",headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...t.headers},signal:s.signal});clearTimeout(n);try{o=await i.json()}catch(e){throw console.error("‚ùå Erreur de parsing JSON:",e),new a(i.status,"R√©ponse du serveur invalide",{parseError:e,status:i.status})}if(!i.ok){let e=o.message||"Une erreur est survenue";o.errors&&Array.isArray(o.errors)&&(e=o.errors.map(e=>e.message||e).join(", "));let t=new a(i.status,e,o);throw console.error("‚ùå API Error:",t.getDebugInfo()),t}console.log("‚úÖ API Success: ".concat(t.method||"GET"," ").concat(e));let{success:c,...l}=o;return{success:null==c||c,...l}}catch(e){if(clearTimeout(n),e instanceof Error&&"AbortError"===e.name){let e=new a(408,"La requ√™te a pris trop de temps (timeout apr√®s 30 secondes)");throw console.error("‚è±Ô∏è Timeout Error:",e.getDebugInfo()),e}throw e}}catch(t){if(t instanceof a)throw t;let e=new a(0,t instanceof Error?t.message:"Erreur de connexion au serveur");throw console.error("‚ùå Network Error:",e.getDebugInfo()),e}}async function n(e,t){return s(e,{...t,method:"GET"})}async function o(e,t,r){return s(e,{...r,method:"POST",body:JSON.stringify(t)})}async function i(e,t,r){return s(e,{...r,method:"PUT",body:JSON.stringify(t)})}async function c(e,t){return s(e,{...t,method:"DELETE"})}function l(e){return e instanceof a?e.getUserMessage():(null==e?void 0:e.message)||"Une erreur inattendue est survenue"}let d={login:async e=>o(r.API_ENDPOINTS.AUTH.LOGIN,e),register:async e=>o(r.API_ENDPOINTS.AUTH.REGISTER,e),logout:async()=>o(r.API_ENDPOINTS.AUTH.LOGOUT),changePassword:async e=>{let t=localStorage.getItem("token");return i(r.API_ENDPOINTS.AUTH.CHANGE_PASSWORD,e,{headers:{Authorization:"Bearer ".concat(t)}})}}},25030,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>o,"CardHeader",()=>s,"CardTitle",()=>n]);var t=e.i(50622),r=e.i(34821);function a(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function s(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...s})}function o(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...s})}},18326,e=>{"use strict";e.s(["API_ENDPOINTS",()=>t,"VALIDATION",()=>r,"getImageUrl",()=>a]);let t={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",RESET_PASSWORD:"/auth/reset-password",CHANGE_PASSWORD:"/auth/change-password",STATS:"/auth/stats",USERS:"/auth/users"},EMPLOYEES:"/employees",EMPLOYEE_BY_ID:e=>"/employees/".concat(e),EMPLOYEE_STATS:"/employees/stats",BADGES:"/badges",BADGE_BY_ID:e=>"/badges/".concat(e),BADGE_STATS:"/badges/stats",PRINT_BADGE:e=>"/badges/".concat(e,"/print"),USERS:"/users",USER_PROFILE:"/users/me"},r={MIN_PASSWORD_LENGTH:8,PHONE_REGEX:/^(\+224\s?)?6\d{2}(\s?\d{2}){3}$/,EMAIL_REGEX:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,MATRICULE_REGEX:/.{3,}/},a=e=>{if(!e)return null;if(e.startsWith("http"))return e;let t=e.startsWith("/")?e.slice(1):e;return"".concat("http://192.168.100.171:4003/api","/").concat(t)}},64033,e=>{"use strict";e.s(["QrCode",()=>t],64033);let t=(0,e.i(30284).default)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},89927,e=>{"use strict";e.s(["XCircle",()=>t],89927);let t=(0,e.i(30284).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},25760,e=>{"use strict";e.s(["badgesService",()=>a]);var t=e.i(18326),r=e.i(40267);let a={async getAll(e){let a=new URLSearchParams;(null==e?void 0:e.page)&&a.append("page",e.page),(null==e?void 0:e.limit)&&a.append("limit",e.limit),(null==e?void 0:e.status)&&"TOUS"!==e.status&&a.append("status",e.status),(null==e?void 0:e.type)&&"TOUS"!==e.type&&a.append("type",e.type),(null==e?void 0:e.search)&&a.append("search",e.search),(null==e?void 0:e.dateDemandeDe)&&a.append("dateDemandeDe",e.dateDemandeDe),(null==e?void 0:e.dateDemandeA)&&a.append("dateDemandeA",e.dateDemandeA),(null==e?void 0:e.dateImpressionDe)&&a.append("dateImpressionDe",e.dateImpressionDe),(null==e?void 0:e.dateImpressionA)&&a.append("dateImpressionA",e.dateImpressionA);let s="".concat(t.API_ENDPOINTS.BADGES,"?").concat(a.toString()),n=localStorage.getItem("token");return(0,r.get)(s,{headers:{Authorization:"Bearer ".concat(n)}})},async getById(e){let a=localStorage.getItem("token");return(0,r.get)(t.API_ENDPOINTS.BADGE_BY_ID(e),{headers:{Authorization:"Bearer ".concat(a)}})},async print(e){let a=localStorage.getItem("token");return(0,r.post)(t.API_ENDPOINTS.PRINT_BADGE(e),{},{headers:{Authorization:"Bearer ".concat(a)}})},verify:async e=>(console.log("üîç Appel API verify avec qrCode:",e),(0,r.get)("".concat(t.API_ENDPOINTS.BADGES,"/verify/").concat(e))),async getQRCode(e){let a=localStorage.getItem("token");return(0,r.get)("".concat(t.API_ENDPOINTS.BADGES,"/").concat(e,"/qr-code"),{headers:{Authorization:"Bearer ".concat(a)}})},async downloadQRCode(e,t){try{var r;let a=await this.getQRCode(e);if(!a.success||!(null==(r=a.data)?void 0:r.image))throw Error("Impossible de r√©cup√©rer le QR code");let s=a.data.image,n=document.createElement("a");n.href=s,n.download="QRCode_".concat(t.replace(/\s+/g,"_"),"_").concat(Date.now(),".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(e){throw console.error("Erreur t√©l√©chargement QR code:",e),e}},async authorizeReprint(e){let a=localStorage.getItem("token");return(0,r.post)("".concat(t.API_ENDPOINTS.BADGES,"/").concat(e,"/authorize-reprint"),{},{headers:{Authorization:"Bearer ".concat(a)}})}}},93963,e=>{"use strict";e.s(["Search",()=>t],93963);let t=(0,e.i(30284).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6021,e=>{"use strict";e.s(["default",()=>h]);var t=e.i(50622),r=e.i(17257),a=e.i(67493),s=e.i(96382),n=e.i(49505),o=e.i(25030),i=e.i(64033),c=e.i(89927),l=e.i(93963),d=e.i(25760);function u(){let e=(0,a.useSearchParams)(),[u,h]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[x,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b(!0)},[]),(0,r.useEffect)(()=>{if(!v)return;let t=e.get("qr");t&&(h(t),setTimeout(()=>{E(t)},500))},[e,v]);let E=async e=>{try{var t;g(!0),y(""),f(null),console.log("üîç [Frontend] Appel verify avec code:",e);let r=await d.badgesService.verify(e);console.log("üì• [Frontend] R√©ponse re√ßue:",JSON.stringify(r,null,2)),console.log("üì• [Frontend] response.data:",r.data),console.log("üì• [Frontend] response.data?.employee:",null==(t=r.data)?void 0:t.employee),f(r)}catch(e){console.error("‚ùå [Frontend] Erreur verify:",e),y(e.message||"Code QR invalide ou non trouv√©")}finally{g(!1)}},N=async()=>{if(!u.trim())return void y("Veuillez entrer un code QR");await E(u)},S=p&&p.employee?{icon:i.QrCode,color:"text-[#ff8d13]",bgColor:"bg-orange-50",borderColor:"border-orange-200"}:null;return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50 py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[#ff8d13] to-[#ff8d13] rounded-3xl flex items-center justify-center shadow-2xl shadow-[#ff8d13]/30 mx-auto",children:(0,t.jsx)(i.QrCode,{className:"w-10 h-10 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#ff8d13] to-[#ff8d13] bg-clip-text text-transparent",children:"V√©rification de Badge"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Scannez ou entrez le code QR pour v√©rifier le statut du badge"})]})]}),(0,t.jsxs)(o.Card,{className:"shadow-2xl border-0 bg-white",children:[(0,t.jsxs)(o.CardHeader,{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-b border-orange-100",children:[(0,t.jsx)(o.CardTitle,{className:"text-xl font-bold text-gray-900",children:"Entrez le Code QR"}),(0,t.jsx)(o.CardDescription,{children:"Le code QR se trouve au format QR-XXXX-XXXXXX"})]}),(0,t.jsxs)(o.CardContent,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(n.Input,{placeholder:"Ex: QR-2025-ABC123",value:u,onChange:e=>{h(e.target.value),y("")},onKeyPress:e=>"Enter"===e.key&&N(),className:"h-12 text-lg border-2 border-gray-200 focus:border-[#ff8d13] focus:ring-4 focus:ring-[#ff8d13]/10 transition-all rounded-xl"}),(0,t.jsx)(s.Button,{onClick:N,disabled:m,className:"h-12 px-8 bg-gradient-to-r from-[#ff8d13] to-[#ff8d13] hover:from-[#e67d0f] hover:to-[#ff8d13] shadow-lg",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"V√©rification..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Search,{className:"w-5 h-5 mr-2"}),"V√©rifier"]})})]}),x&&(0,t.jsxs)("div",{className:"p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-start gap-3",children:[(0,t.jsx)(c.XCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-red-800 text-sm font-medium",children:x})]})]})]}),p&&S&&(0,t.jsx)(o.Card,{className:"shadow-2xl border-2 ".concat(S.borderColor," ").concat(S.bgColor),children:(0,t.jsxs)(o.CardContent,{className:"p-8 space-y-6",children:[p.employee&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Matricule"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:p.employee.matricule})]})})}),p&&!p.employee&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.XCircle,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:"Matricule non trouv√©"})]})]})})]})})}function h(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-[#ff8d13] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Chargement..."})]})}),children:(0,t.jsx)(u,{})})}}]);