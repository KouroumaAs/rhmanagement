{"version":3,"sources":["turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/src/shared/lib/lazy-dynamic/bailout-to-csr.ts","turbopack:///[project]/Desktop/rhmanagement/frontend/node_modules/next/navigation.js","turbopack:///[project]/Desktop/rhmanagement/frontend/src/contexts/AuthContext.tsx","turbopack:///[project]/Desktop/rhmanagement/frontend/app/MobileConsole.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","// This has to be a shared module which is shared between client component error boundary and dynamic component\nconst BAILOUT_TO_CSR = 'BAILOUT_TO_CLIENT_SIDE_RENDERING'\n\n/** An error that should be thrown when we want to bail out to client-side rendering. */\nexport class BailoutToCSRError extends Error {\n  public readonly digest = BAILOUT_TO_CSR\n\n  constructor(public readonly reason: string) {\n    super(`Bail out to client-side rendering: ${reason}`)\n  }\n}\n\n/** Checks if a passed argument is an error that is thrown if we want to bail out to client-side rendering. */\nexport function isBailoutToCSRError(err: unknown): err is BailoutToCSRError {\n  if (typeof err !== 'object' || err === null || !('digest' in err)) {\n    return false\n  }\n\n  return err.digest === BAILOUT_TO_CSR\n}\n","module.exports = require('./dist/client/components/navigation')\n","\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\n\r\ninterface User {\r\n  id: string;\r\n  nom: string;\r\n  prenom: string;\r\n  email: string;\r\n  role: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  token: string | null;\r\n  isLoading: boolean;\r\n  login: (token: string, userData: User) => void;\r\n  logout: () => void;\r\n  isAuthenticated: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\n// Pages publiques qui ne n√©cessitent pas d'authentification\r\nconst PUBLIC_ROUTES = ['/login', '/register', '/forgot-password', '/verify'];\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    // V√©rifier si un token existe dans le localStorage\r\n    const storedToken = localStorage.getItem('token');\r\n    const storedUser = localStorage.getItem('user');\r\n\r\n    if (storedToken && storedUser) {\r\n      setToken(storedToken);\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Rediriger si l'utilisateur n'est pas authentifi√© et tente d'acc√©der √† une route prot√©g√©e\r\n    if (!isLoading) {\r\n      const isPublicRoute = PUBLIC_ROUTES.some(route => pathname?.startsWith(route));\r\n      const isHomePage = pathname === '/';\r\n      const isEmployeesRoute = pathname?.startsWith('/dashboard/rh/employees');\r\n      const isDashboardRH = pathname === '/dashboard/rh';\r\n      const isUsersRoute = pathname?.startsWith('/dashboard/rh/users');\r\n      const isChangePasswordRoute = pathname === '/change-password';\r\n\r\n      if (!token && !isPublicRoute && !isHomePage) {\r\n        // Pas de token et route prot√©g√©e -> rediriger vers login\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      // Rediriger le RH et ASSISTANT_RH s'ils essaient d'acc√©der √† une route non autoris√©e\r\n      if (token && user && (user.role === 'RH' || user.role === 'ASSISTANT_RH')) {\r\n        // Le RH et ASSISTANT_RH ne peuvent acc√©der qu'aux routes /dashboard/rh, /dashboard/rh/employees/* et /change-password\r\n        // Mais PAS aux routes /dashboard/rh/users/*\r\n        if (isUsersRoute) {\r\n          router.push('/dashboard/rh/employees');\r\n          return;\r\n        }\r\n\r\n        const allowedRoutes = isEmployeesRoute || isDashboardRH || isPublicRoute || isHomePage || isChangePasswordRoute;\r\n        if (!allowedRoutes) {\r\n          router.push('/dashboard/rh/employees');\r\n        }\r\n      }\r\n      // Ne pas rediriger automatiquement depuis les pages publiques si le token vient d'√™tre d√©fini\r\n      // La page de login g√®re sa propre redirection\r\n    }\r\n  }, [token, user, pathname, isLoading, router]);\r\n\r\n  const login = (newToken: string, userData: User) => {\r\n    localStorage.setItem('token', newToken);\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n\r\n    // Aussi sauvegarder dans les cookies pour le middleware\r\n    document.cookie = `token=${newToken}; path=/; max-age=${7 * 24 * 60 * 60}`; // 7 jours\r\n\r\n    setToken(newToken);\r\n    setUser(userData);\r\n  };\r\n\r\n  const logout = () => {\r\n    console.log('logout() appel√©');\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    console.log('localStorage nettoy√©');\r\n\r\n    // Supprimer aussi le cookie\r\n    document.cookie = 'token=; path=/; max-age=0';\r\n    console.log('Cookie supprim√©');\r\n\r\n    setToken(null);\r\n    setUser(null);\r\n    console.log('√âtat r√©initialis√©');\r\n\r\n    // Forcer un rechargement complet pour r√©initialiser l'√©tat\r\n    console.log('Redirection vers /login...');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    token,\r\n    isLoading,\r\n    login,\r\n    logout,\r\n    isAuthenticated: !!token,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function MobileConsole() {\r\n  useEffect(() => {\r\n    // Charger Eruda seulement en d√©veloppement\r\n    if (process.env.NODE_ENV === 'development') {\r\n      import('eruda').then(eruda => {\r\n        eruda.default.init();\r\n        console.log('üì± Console mobile Eruda charg√©e !');\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React","BailoutToCSRError","isBailoutToCSRError","BAILOUT_TO_CSR","Error","constructor","reason","digest","err"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7]}